# 集合初始容量与集合使用效率

---

**结论：**

创建集合实例时，最好指定集合容量的初始值，如果暂时无法确定集合大小，可以先使用默认值。



**说明：**

部分Java集合具有自动扩容的能力，例如ArrayList、HashMap。自动扩容一般包含以下几个步骤：

1. 确定新的存储容量
2. 创建新的存储空间
3. 复制旧的集合元素
4. 回收旧的存储空间

如果最终需要存储的集合元素较多，且使用默认的集合容量，那么在集合使用的过程中，需要进行多次自动扩容，最终降低程序的执行效率。



**怎样设置集合初始容量才合理？**

- HashMap

    initialCapacity = (需要存储的元素个数 / 负载因子) + 1。注意负载因子（即 loader factor）默认

    为 0.75，如果暂时无法确定初始值大小，请设置为 16（即默认值）。

- ArrayList